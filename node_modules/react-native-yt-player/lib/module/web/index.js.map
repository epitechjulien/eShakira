{"version":3,"sources":["index.js"],"names":["YouTubePlayer","invoke","player","duration","isPaused","window","innerWidth","innerHeight","width","height","onReady","bind","onError","onStateChange","onPlaybackRateChange","onPlaybackQualityChange","onPlaying","onDurationReady","_onStateChange","data","_setDuration","_setCurrentTime","createPlayer","opts","options","playerVars","enablejsapi","autoplay","rel","controls","playsinline","modestbranding","showinfo","on","playVideo","then","pauseVideo","seekTo","s","getDuration","setInterval","getCurrentTime","define"],"mappings":"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","sourcesContent":["import YouTubePlayer from \"youtube-player\";\nimport invoke from \"react-native-webview-invoke/browser\";\n\nvar player;\nlet duration = 0;\nlet isPaused = false;\nconst { innerWidth, innerHeight } = window;\nlet width = \"100%\";\nlet height = \"100%\";\n\n// if (innerHeight > (innerWidth * 9) / 16) width = (innerHeight * 16) / 9;\n// else height = (innerWidth * 9) / 16;\n\n//listeners\n\nconst onReady = invoke.bind(\"onReady\");\nconst onError = invoke.bind(\"onError\");\nconst onStateChange = invoke.bind(\"onStateChange\");\nconst onPlaybackRateChange = invoke.bind(\"onPlaybackRateChange\");\nconst onPlaybackQualityChange = invoke.bind(\"onPlaybackQualityChange\");\nconst onPlaying = invoke.bind(\"onPlaying\");\nconst onDurationReady = invoke.bind(\"onDurationReady\");\n\nconst _onStateChange = ({ data }) => {\n  // in case first time playing ,\n  // we need to send Duration\n  // and start Interval to sent current Time and\n  if (data === 1 && duration === 0) {\n    _setDuration();\n    _setCurrentTime();\n  }\n  // we need to stop interval in case player state !== playing and activate it on playing mode\n  if (data !== 1) isPaused = true;\n  else isPaused = false;\n\n  onStateChange(data);\n};\n\nconst createPlayer = opts => {\n  const options = {\n    width,\n    height,\n    ...opts,\n    playerVars: {\n      enablejsapi: 1,\n      autoplay: 0,\n      rel: 0,\n      controls: 0,\n      playsinline: 1,\n      modestbranding: 1,\n      showinfo: 0,\n      ...opts.playerVars\n    }\n  };\n\n  player = YouTubePlayer(\"player\", options);\n  player.on(\"ready\", onReady);\n  player.on(\"error\", onError);\n  player.on(\"stateChange\", _onStateChange);\n  player.on(\"playbackRateChange\", onPlaybackRateChange);\n  player.on(\"playbackQualityChange\", onPlaybackQualityChange);\n  if (opts.playerVars && opts.playerVars.autoplay) playVideo();\n};\n\n//createPlayer({ videoId: \"Z1LmpiIGYNs\" });\n\n// actions\nconst playVideo = () => {\n  player.playVideo().then(() => {});\n};\nconst pauseVideo = () => {\n  player.pauseVideo().then(() => {});\n};\nconst seekTo = s => {\n  player.seekTo(s).then(() => {});\n};\n\nconst _setDuration = () =>\n  player.getDuration().then(s => {\n    duration = s;\n    onDurationReady(s);\n  });\n\n// send current time every 1000 ms\nconst _setCurrentTime = () => {\n  setInterval(() => {\n    if (!isPaused) player.getCurrentTime().then(s => onPlaying(s));\n  }, 500);\n};\n\n// invoke functions\n\ninvoke.define(\"createPlayer\", createPlayer);\ninvoke.define(\"playVideo\", playVideo);\ninvoke.define(\"pauseVideo\", pauseVideo);\ninvoke.define(\"seekTo\", seekTo);\n"]}